<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Spiral Animation with p5.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
      body {
        margin: 0;
        background: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      canvas {
        border: 1px solid #ccc;
      }
    </style>
  </head>
  <body>
    <script>
      const spirals = [];
      const numSpirals = 3;
      const center = { x: 400, y: 400 };

      function setup() {
        createCanvas(800, 800);
        background(255);
        for (let i = 0; i < numSpirals; i++) {
          spirals.push(new Spiral());
        }
      }

      function draw() {
        for (let s of spirals) {
          s.update();
          s.show();
        }
      }

      class Spiral {
        constructor() {
          this.reset();
        }

        reset() {
          let offset = p5.Vector.random2D().mult(random(5, 30));
          this.pos = createVector(center.x + offset.x, center.y + offset.y);
          this.angle = random(TWO_PI);
          this.radius = 0;
          this.speed = random(0.05, 0.2);
          this.color = color(random(255), random(255), random(255), 100);
          this.lineWidth = random(0.5, 10);;
          this.prevPos = this.pos.copy();
        }

        update() {
          this.radius += this.speed * 5;
          this.angle += this.speed;
          this.lineWidth = map(this.radius, 0, width / 2, 1, 20);
          this.prevPos = this.pos.copy();
          this.pos.x = center.x + cos(this.angle) * this.radius;
          this.pos.y = center.y + sin(this.angle) * this.radius;

          // If out of bounds, reset spiral
          if (
            this.pos.x < 0 ||
            this.pos.x > width ||
            this.pos.y < 0 ||
            this.pos.y > height
          ) {
            this.reset();
          }
        }

        show() {
          stroke(this.color);
          strokeWeight(this.lineWidth);
          line(this.prevPos.x, this.prevPos.y, this.pos.x, this.pos.y);
        }
      }
    </script>
  </body>
</html>
